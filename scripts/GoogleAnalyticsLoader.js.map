{"version":3,"file":"GoogleAnalyticsLoader.js","names":["GoogleAnalyticsLoader","_ref","config","_classCallCheck","analyticsId","GOOGLE_ANALYTICS_4_ID","_createClass","key","value","loadScript","global","googleAnalytics","_global","invoked","load","options","scriptSrc","document","createElement","type","async","src","concat","scriptGtag","innerHTML","first","getElementsByTagName","parentNode","insertBefore","_loadOptions"],"sources":["../../src/scripts/GoogleAnalyticsLoader.js"],"sourcesContent":["/**\r\n * @implements {GoogleAnalyticsLoader}\r\n * @memberof module:GoogleAnalytics\r\n */\r\nclass GoogleAnalyticsLoader {\r\n  constructor({ config }) {\r\n    this.analyticsId = config.GOOGLE_ANALYTICS_4_ID;\r\n  }\r\n\r\n  loadScript() {\r\n    if (!this.analyticsId) {\r\n      return;\r\n    }\r\n\r\n    global.googleAnalytics = global.googleAnalytics || [];\r\n    const { googleAnalytics } = global;\r\n\r\n    // If the snippet was invoked do nothing.\r\n    if (googleAnalytics.invoked) {\r\n      return;\r\n    }\r\n\r\n    // Invoked flag, to make sure the snippet\r\n    // is never invoked twice.\r\n    googleAnalytics.invoked = true;\r\n\r\n    googleAnalytics.load = (key, options) => {\r\n      const scriptSrc = document.createElement('script');\r\n      scriptSrc.type = 'text/javascript';\r\n      scriptSrc.async = true;\r\n      scriptSrc.src = `https://www.googletagmanager.com/gtag/js?id=${key}`;\r\n\r\n      const scriptGtag = document.createElement('script');\r\n      scriptGtag.innerHTML = `\r\n        window.dataLayer = window.dataLayer || [];\r\n        function gtag(){dataLayer.push(arguments);}\r\n        gtag('js', new Date());\r\n        gtag('config', '${key}');\r\n      `;\r\n\r\n      // Insert our scripts next to the first script element.\r\n      const first = document.getElementsByTagName('script')[0];\r\n      first.parentNode.insertBefore(scriptSrc, first);\r\n      first.parentNode.insertBefore(scriptGtag, first);\r\n      googleAnalytics._loadOptions = options; // eslint-disable-line no-underscore-dangle\r\n    };\r\n\r\n    // Load GoogleAnalytics with your key.\r\n    googleAnalytics.load(this.analyticsId);\r\n  }\r\n}\r\n\r\nexport default GoogleAnalyticsLoader;\r\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAHA,IAIMA,qBAAqB;EACzB,SAAAA,sBAAAC,IAAA,EAAwB;IAAA,IAAVC,MAAM,GAAAD,IAAA,CAANC,MAAM;IAAAC,eAAA,OAAAH,qBAAA;IAClB,IAAI,CAACI,WAAW,GAAGF,MAAM,CAACG,qBAAqB;EACjD;EAACC,YAAA,CAAAN,qBAAA;IAAAO,GAAA;IAAAC,KAAA,EAED,SAAAC,WAAA,EAAa;MACX,IAAI,CAAC,IAAI,CAACL,WAAW,EAAE;QACrB;MACF;MAEAM,MAAM,CAACC,eAAe,GAAGD,MAAM,CAACC,eAAe,IAAI,EAAE;MACrD,IAAAC,OAAA,GAA4BF,MAAM;QAA1BC,eAAe,GAAAC,OAAA,CAAfD,eAAe;;MAEvB;MACA,IAAIA,eAAe,CAACE,OAAO,EAAE;QAC3B;MACF;;MAEA;MACA;MACAF,eAAe,CAACE,OAAO,GAAG,IAAI;MAE9BF,eAAe,CAACG,IAAI,GAAG,UAACP,GAAG,EAAEQ,OAAO,EAAK;QACvC,IAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;QAClDF,SAAS,CAACG,IAAI,GAAG,iBAAiB;QAClCH,SAAS,CAACI,KAAK,GAAG,IAAI;QACtBJ,SAAS,CAACK,GAAG,kDAAAC,MAAA,CAAkDf,GAAG,CAAE;QAEpE,IAAMgB,UAAU,GAAGN,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;QACnDK,UAAU,CAACC,SAAS,0KAAAF,MAAA,CAIAf,GAAG,gBACtB;;QAED;QACA,IAAMkB,KAAK,GAAGR,QAAQ,CAACS,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACxDD,KAAK,CAACE,UAAU,CAACC,YAAY,CAACZ,SAAS,EAAES,KAAK,CAAC;QAC/CA,KAAK,CAACE,UAAU,CAACC,YAAY,CAACL,UAAU,EAAEE,KAAK,CAAC;QAChDd,eAAe,CAACkB,YAAY,GAAGd,OAAO,CAAC,CAAC;MAC1C,CAAC;;MAED;MACAJ,eAAe,CAACG,IAAI,CAAC,IAAI,CAACV,WAAW,CAAC;IACxC;EAAC;EAAA,OAAAJ,qBAAA;AAAA;AAGH,eAAeA,qBAAqB"}