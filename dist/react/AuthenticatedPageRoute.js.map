{"version":3,"file":"AuthenticatedPageRoute.js","names":["React","useContext","PropTypes","AppContext","PageWrap","getLoginRedirectUrl","AuthenticatedPageRoute","_ref","redirectUrl","children","_useContext","authenticatedUser","destination","global","location","href","assign","createElement","propTypes","string","node","isRequired","defaultProps"],"sources":["../../src/react/AuthenticatedPageRoute.jsx"],"sourcesContent":["import React, { useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport AppContext from './AppContext';\r\nimport PageWrap from './PageWrap';\r\nimport { getLoginRedirectUrl } from '../auth';\r\n\r\n/**\r\n * A react-router route that redirects to the login page when the route becomes active and the user\r\n * is not authenticated.  If the application has been initialized with `requireAuthenticatedUser`\r\n * false, an authenticatedPageRoute can be used to protect a subset of the application's routes,\r\n * rather than the entire application.\r\n *\r\n * It can optionally accept an override URL to redirect to instead of the login page.\r\n *\r\n * Like a `PageWrap`, also calls `sendPageEvent` when the route becomes active.\r\n *\r\n * @see PageWrap\r\n * @see {@link module:frontend-platform/analytics~sendPageEvent}\r\n * @memberof module:React\r\n * @param {Object} props\r\n * @param {string} props.redirectUrl The URL anonymous users should be redirected to, rather than\r\n * viewing the route's contents.\r\n */\r\nexport default function AuthenticatedPageRoute({ redirectUrl, children }) {\r\n  const { authenticatedUser } = useContext(AppContext);\r\n  if (authenticatedUser === null) {\r\n    const destination = redirectUrl || getLoginRedirectUrl(global.location.href);\r\n    global.location.assign(destination);\r\n\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <PageWrap>\r\n      {children}\r\n    </PageWrap>\r\n  );\r\n}\r\n\r\nAuthenticatedPageRoute.propTypes = {\r\n  redirectUrl: PropTypes.string,\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nAuthenticatedPageRoute.defaultProps = {\r\n  redirectUrl: null,\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,SAAS,MAAM,YAAY;AAElC,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,mBAAmB,QAAQ,SAAS;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,sBAAsBA,CAAAC,IAAA,EAA4B;EAAA,IAAzBC,WAAW,GAAAD,IAAA,CAAXC,WAAW;IAAEC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;EACpE,IAAAC,WAAA,GAA8BT,UAAU,CAACE,UAAU,CAAC;IAA5CQ,iBAAiB,GAAAD,WAAA,CAAjBC,iBAAiB;EACzB,IAAIA,iBAAiB,KAAK,IAAI,EAAE;IAC9B,IAAMC,WAAW,GAAGJ,WAAW,IAAIH,mBAAmB,CAACQ,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC;IAC5EF,MAAM,CAACC,QAAQ,CAACE,MAAM,CAACJ,WAAW,CAAC;IAEnC,OAAO,IAAI;EACb;EAEA,oBACEZ,KAAA,CAAAiB,aAAA,CAACb,QAAQ,QACNK,QACO,CAAC;AAEf;AAEAH,sBAAsB,CAACY,SAAS,GAAG;EACjCV,WAAW,EAAEN,SAAS,CAACiB,MAAM;EAC7BV,QAAQ,EAAEP,SAAS,CAACkB,IAAI,CAACC;AAC3B,CAAC;AAEDf,sBAAsB,CAACgB,YAAY,GAAG;EACpCd,WAAW,EAAE;AACf,CAAC"}