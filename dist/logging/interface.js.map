{"version":3,"file":"interface.js","names":["PropTypes","optionsShape","config","object","isRequired","serviceShape","logInfo","func","logError","service","configure","LoggingService","options","checkPropTypes","infoStringOrErrorObject","customAttributes","errorStringOrObject","setCustomAttribute","name","value","getLoggingService","Error","resetLoggingService"],"sources":["../../src/logging/interface.js"],"sourcesContent":["/**\r\n * #### Import members from **@edx/frontend-platform/logging**\r\n *\r\n * Contains a shared interface for logging information. (The default implementation is in\r\n * NewRelicLoggingService.js.) When in development mode, all messages will instead be sent to the console.\r\n *\r\n * The `initialize` function performs much of the logging configuration for you.  If, however,\r\n * you're not using the `initialize` function, logging (via New Relic) can be configured via:\r\n *\r\n * ```\r\n * import { configure, NewRelicLoggingService, logInfo, logError } from '@edx/frontend-platform/logging';\r\n * import { geConfig } from '@edx/frontend-platform';\r\n *\r\n * configureLogging(NewRelicLoggingService, {\r\n *   config: getConfig(),\r\n * });\r\n *\r\n * logInfo('Just so you know...');\r\n * logInfo(new Error('Unimportant error'), { type: 'unimportant' });\r\n * logError('Uhoh!');\r\n * logError(new Error('Uhoh error!'));\r\n * ```\r\n *\r\n * As shown in this example, logging depends on the configuration document.\r\n *\r\n * @module Logging\r\n */\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nconst optionsShape = {\r\n  config: PropTypes.object.isRequired,\r\n};\r\n\r\nconst serviceShape = {\r\n  logInfo: PropTypes.func.isRequired,\r\n  logError: PropTypes.func.isRequired,\r\n};\r\n\r\nlet service = null;\r\n\r\n/**\r\n *\r\n */\r\nexport function configure(LoggingService, options) {\r\n  PropTypes.checkPropTypes(optionsShape, options, 'property', 'Logging');\r\n  service = new LoggingService(options);\r\n  PropTypes.checkPropTypes(serviceShape, service, 'property', 'LoggingService');\r\n  return service;\r\n}\r\n\r\n/**\r\n * Logs a message to the 'info' log level. Can accept custom attributes as a property of the error\r\n * object, or as an optional second parameter.\r\n *\r\n * @param {string|Error} infoStringOrErrorObject\r\n * @param {Object} [customAttributes={}]\r\n */\r\nexport function logInfo(infoStringOrErrorObject, customAttributes) {\r\n  return service.logInfo(infoStringOrErrorObject, customAttributes);\r\n}\r\n\r\n/**\r\n * Logs a message to the 'error' log level.  Can accept custom attributes as a property of the error\r\n * object, or as an optional second parameter.\r\n *\r\n * @param {string|Error} errorStringOrObject\r\n * @param {Object} [customAttributes={}]\r\n */\r\nexport function logError(errorStringOrObject, customAttributes) {\r\n  return service.logError(errorStringOrObject, customAttributes);\r\n}\r\n\r\n/**\r\n * Sets a custom attribute that will be included with all subsequent log messages.\r\n *\r\n * @param {string} name\r\n * @param {string|number|null} value\r\n */\r\nexport function setCustomAttribute(name, value) {\r\n  return service.setCustomAttribute(name, value);\r\n}\r\n\r\n/**\r\n *\r\n * @throws {Error} Thrown if the logging service has not yet been configured via {@link configure}.\r\n * @returns {LoggingService}\r\n */\r\nexport function getLoggingService() {\r\n  if (!service) {\r\n    throw Error('You must first configure the logging service.');\r\n  }\r\n  return service;\r\n}\r\n\r\n/**\r\n * Sets the configured logging service back to null.\r\n *\r\n */\r\nexport function resetLoggingService() {\r\n  service = null;\r\n}\r\n\r\n/**\r\n * @name LoggingService\r\n * @interface\r\n * @memberof module:Logging\r\n * @property {function} logError\r\n * @property {function} logInfo\r\n */\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,SAAS,MAAM,YAAY;AAElC,IAAMC,YAAY,GAAG;EACnBC,MAAM,EAAEF,SAAS,CAACG,MAAM,CAACC;AAC3B,CAAC;AAED,IAAMC,YAAY,GAAG;EACnBC,OAAO,EAAEN,SAAS,CAACO,IAAI,CAACH,UAAU;EAClCI,QAAQ,EAAER,SAAS,CAACO,IAAI,CAACH;AAC3B,CAAC;AAED,IAAIK,OAAO,GAAG,IAAI;;AAElB;AACA;AACA;AACA,OAAO,SAASC,SAASA,CAACC,cAAc,EAAEC,OAAO,EAAE;EACjDZ,SAAS,CAACa,cAAc,CAACZ,YAAY,EAAEW,OAAO,EAAE,UAAU,EAAE,SAAS,CAAC;EACtEH,OAAO,GAAG,IAAIE,cAAc,CAACC,OAAO,CAAC;EACrCZ,SAAS,CAACa,cAAc,CAACR,YAAY,EAAEI,OAAO,EAAE,UAAU,EAAE,gBAAgB,CAAC;EAC7E,OAAOA,OAAO;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASH,OAAOA,CAACQ,uBAAuB,EAAEC,gBAAgB,EAAE;EACjE,OAAON,OAAO,CAACH,OAAO,CAACQ,uBAAuB,EAAEC,gBAAgB,CAAC;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASP,QAAQA,CAACQ,mBAAmB,EAAED,gBAAgB,EAAE;EAC9D,OAAON,OAAO,CAACD,QAAQ,CAACQ,mBAAmB,EAAED,gBAAgB,CAAC;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,kBAAkBA,CAACC,IAAI,EAAEC,KAAK,EAAE;EAC9C,OAAOV,OAAO,CAACQ,kBAAkB,CAACC,IAAI,EAAEC,KAAK,CAAC;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,iBAAiBA,CAAA,EAAG;EAClC,IAAI,CAACX,OAAO,EAAE;IACZ,MAAMY,KAAK,CAAC,+CAA+C,CAAC;EAC9D;EACA,OAAOZ,OAAO;AAChB;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASa,mBAAmBA,CAAA,EAAG;EACpCb,OAAO,GAAG,IAAI;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA"}